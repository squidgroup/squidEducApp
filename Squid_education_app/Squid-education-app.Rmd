---
title: "Tutorial"
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: >
  Learn how to set up R and RStudio on your machine. We will also demonstrate
  how to install R packages from CRAN, and install the tidyverse package.
---

```{r setup, include=FALSE}
library(learnr)
knitr::opts_chunk$set(echo = FALSE)
```

## ![](images/logo_2.png){width="85"}**SQuID**

Welcome to this online course on mixed-effects models, by the SQuID network. **SQuID** stands for **S**tatistical **Qu**antification of **I**ndividual **D**ifferences. The course aims to help scholars who are interested in understanding patterns of phenotypic variance. Individual differences are the raw material for natural selection to act on and hence the basis of evolutionary adaptation. Understanding the sources of phenotypic variance is thus a most essential feature of biological investigation and mixed effects models offer a great, albeit challenging tool. Disseminating the properties, potentials and interpretational challenges in the research community is thus a foremost goal of SQuID.

### Demonstration by Simulation

In this course, we use the SQuID $\texttt{R}$-package to generate data sets that can be used to run analyses. Simulations are helpful in understanding "behavior" of statistical models and can be used to better understand sampling designs, and their impact on the accuracy with which different ecological quantities are estimated using mixed-effects models. Thus, besides following this course, we highly recommend exploring the SQuID $\texttt{R}$-package.

### Ecological model

**SQuID** is based on the premise that a group of individuals (i.e. study population) repeatedly expresses phenotypes, for one or different traits, in uniform time. Phenotypic values of traits are generated following the general principle of the phenotypic equation ([Dingemanse & Dochtermann 2013, Journal of Animal Ecology](http://onlinelibrary.wiley.com/doi/10.1111/1365-2656.12013/abstract)): phenotypic variance ($V_",NOT$total,"\$) is assumed to be the sum of a series of components (see the full model). The user has thus the flexibility to add different variance components that will form the phenotype of the individual at each time step, and to set up the relative importance of each component. SQuiD then allows the user to collect a subsample of phenotypes for each simulated individual (i.e. operational data set), according to a specific sampling design. For most of the modules, the operational data set generated is automatically fed into a statistical model in R and the main results of the analysis shown in an output. For the full model the user has the opportunity to download the operational data set for further analyses."

### Modules

Our goal with this course is to help researchers become familiar with multilevel variation, and building sampling designs for their study. SQuID is built up as a series of modules that guide the user into situations of increasing complexity to explore the dynamics between the way records are collected and estimates of parameters of specific interest. Each module covers a different aspect of studying individual differences using the mixed-effects modeling framework.

The SQuID modules can be very useful for teaching statistical concepts, especially ones related to linear mixed models. Which module to use depends on your students and what you want them to learn. Brief descriptors of each module are available on this page (instructions to see them).

###  Shiny

We will make use of various shiny apps throughout this course to present key concepts in exploring individual differences and multilevel variation. The code for all shiny apps is available [here](https://github.com/squidgroup/squidEducApp).

```{r quiz1, echo = FALSE}
question("Which answer describes you best?",
  answer("Beginner: I have little knowledge of LMMs or multilevel variation.", message = "*Start with Module 1", correct = TRUE),
  answer("Intermediate user: I have prior knowledge of LMMs, multilevel variation, and/or statistical distributions.", message = "*Start with Module 3", correct = TRUE),
  answer("Expert: I have extensive knowledge of the mixed-effects modeling framework and individual differences.", message = "*Fully explore the SQuID concept with the 'full model' modules", correct = TRUE),
  answer("Teacher: I want my student to learn about mixed-effects models and patterns of phenotypic variance. ", message = "*Please skim the module titles to assess which are of most use for your student", correct = TRUE),
  answer("None of the above.", correct = FALSE),
  type = "single",
  incorrect = "Eek, this might not  be the right place for you.",
  correct=""
)
```

## Module 1: Basic lessons about variance
<!-- ```{r} -->
<!-- knitr::include_app("https://gallery.shinyapps.io/001-hello/", height = "500px") -->
<!-- ``` -->

This module will help you to develop an understanding of hierarchies in variance, when individuals express traits repeatedly.

In every case that we measure a trait, it is likely that we have some form of error in the measurement (for example due to poorly calibrated equipment). This error is assumed to be non-directional and represents only a small portion of the total variance $V_p$. 

```{r}
shiny::runApp("/home/bertv/squidEducApp/apps/app1/")
```

-- exercise Use the below app to explore contribution of the measurement error term. Measurement error variance should not be high in real world examples, lower than 5% of the total variance, but of course some traits can be associated with much higher measurement error. 

An explanation of notation: There are several kinds of unaccounted variance in a statistical model. This are called, variously, “error variance” or “residual variance”.  Measurement error is one source of this variance, but as you will see below, not all unaccounted variance is the result of error. To distinguish these with notation, we will use “Vm” for measurement error and VR for the more general residual variance. In this particular step, VR = Vm. 

Note that in this module, the total phenotypic variance (VP) is restrained to 1. This will allow a better understanding of the proportions of the different model variance components.



*Here's a simple exercise with an empty code chunk provided for entering the answer.*

Write the R code required to add two plus two:

```{r two-plus-two, exercise=TRUE}

```

### Exercise with Code

*Here's an exercise with some prepopulated code as well as `exercise.lines = 5` to provide a bit more initial room to work.*

Now write a function that adds any two numbers and then call it:

```{r add-function, exercise=TRUE, exercise.lines = 5}
add <- function() {
  
}
```

## Module 2

### Exercise with Hint

*Here's an exercise where the chunk is pre-evaulated via the `exercise.eval` option (so the user can see the default output we'd like them to customize). We also add a "hint" to the correct solution via the chunk immediate below labeled `print-limit-hint`.*

Modify the following code to limit the number of rows printed to 5:

```{r print-limit, exercise=TRUE, exercise.eval=TRUE}
mtcars
```

```{r print-limit-hint}
head(mtcars)
```

### Quiz

*You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.*

Some questions to verify that you understand the purposes of various base and recommended R packages:

```{r quiz}
quiz(
  question("Which package contains functions for installing other R packages?",
    answer("base"),
    answer("tools"),
    answer("utils", correct = TRUE),
    answer("codetools")
  ),
  question("Which of the R packages listed below are used to create plots?",
    answer("lattice", correct = TRUE),
    answer("tools"),
    answer("stats"),
    answer("grid", correct = TRUE)
  )
)
```

## Module 3

## Module 4

## Module 5

## Module 6

### Test your knowledge

```{r quiz2, echo=FALSE}
quiz(caption = "Quiz - Install R",
  question("Is R free to download and use?",
    answer("Yes!", correct = TRUE, message = "R is free _and_ open source, which means that anyone can read, use, and copy the source code of the R language."),
    answer("No.")
  ),
  question("Where do you download R?",
    answer("www.rstudio.com/download"),
    answer("[cloud.r-project.org](http://cloud.r-project.org)", correct = TRUE, message = "You can also download R from [cran.r-project.org](http://cran.r-project.org)"),
    answer("www.r-project.org", message = "Good try, but not exactly. www.r-project.org doesn't provide a download link, but it does provide a link to one the websites above."),
    answer("www.r.com"),
    allow_retry = TRUE
  ),
  question("How often should you update R?",
    answer("Everytime you use it", message = "This will be too often unless you use R very rarely!"),
    answer("About once a year", correct = TRUE, "A new version of R is released about once a year. Update sooner if you encounter a bug that you cannot explain."),
    answer("Never", message = "A new version of R is released about once a year. I'll assume that you are using the newest version of R, which will be the fastest version with the fewest unexpected behaviors." ),
    allow_retry = TRUE
  )
)
```

## List of separate shiny apps
